<?xml version="1.0"?>
  <robot xmlns:xacro="http://ros.org/wiki/xacro" name="anya_base">
 
  <xacro:include filename="$(find anya_slam1)/urdf/kinect.urdf.xacro" />
  <xacro:include filename="$(find anya_slam1)/urdf/wheel.urdf.xacro"  />

  <xacro:property name="brs_l" value="-1.59" />
  <xacro:property name="brs_u" value="1.59"  />

  <xacro:property name="bls_l" value="-1.59" />
  <xacro:property name="bls_u" value="1.59"  />

  <xacro:property name="bh_l" value="-3.14159" />
  <xacro:property name="bh_u" value="3.14159"  />

   <link name="base_link">     
   </link>

   <link name="body_link">

    <visual>
      <origin rpy="0 0 0" xyz="0 -0.048 0"/>
      <geometry>
         <mesh filename="package://anya_slam1/meshes/frame.dae" scale="0.001 0.001 0.001"/> 
      </geometry>      
    </visual>

    <collision>
      <origin rpy="0 0 0" xyz="0 -0.048 0" />
      <geometry>
        <mesh filename="package://anya_slam1/meshes/frame.stl" scale="0.001 0.001 0.001"/> 
      </geometry><limit lower="${brs_l}" upper="${brs_u}" velocity="1.0" effort="60.0"/>
    </collision>

    <inertial>
      <mass value="2600"/>
      <origin rpy="0 0 0" xyz="0 -0.048 0"/>
      <inertia ixx="100" ixy="0" ixz="0" iyy="100" iyz="0" izz="100"/>
    </inertial>
   </link>
   
   <joint name="world_joint" type="fixed">
     <parent link="base_link"/>
     <child link="body_link"/>
     <origin xyz="0.0 0.0 0.0" rpy="-1.5750 0.0 0.0"/>
   </joint> 


<!-- 4 wheels -->
<!-- Leftwheel -->

     <joint name="joint_left_wheel" type="continuous">
         <parent link="body_link"/>
         <child link="link_left_wheel"/>
         <axis xyz="1 0 0"/>
         <origin xyz="0 -0.050 -0.251" rpy="0 1.5750 0"/>
     </joint>

<!-- Rightwheel -->

     <joint name="joint_right_wheel" type="continuous">
         <parent link="body_link"/>
         <child link="link_right_wheel"/>
         <axis xyz="1 0 0"/>
         <origin xyz="0 -0.050 0.251" rpy="0.0 4.71239 0.0"/>
     </joint>

<!-- Joint_castor_front-->
<!-- Frame-->
    <joint name="joint_castor_frame_front" type="continuous">
         <parent link="body_link"/>
         <child link="castor_frame_link_front"/>
         <axis xyz="0 0 1"/>
         <origin xyz="0.135 -0.048 0" rpy="1.5750 0 0"/>
     </joint>  

 <!-- Wheel-->
    <joint name="joint_castor_wheel_front" type="continuous">
         <parent link="castor_frame_link_front"/>
         <child link="castor_wheel_link_front"/>
         <axis xyz="0 1 0"/>
         <origin xyz="-0.02125 -0.0125 -0.030" rpy="0 0 0"/>
     </joint> 

<!-- Joint_castor_back-->
<!-- Frame-->
    <joint name="joint_castor_frame_back" type="continuous">
         <parent link="body_link"/>
         <child link="castor_frame_link_back"/>
         <axis xyz="0 0 1"/>
         <origin xyz="-0.135 -0.048 0" rpy="1.5750 0 0"/>
     </joint>  

 <!-- Wheel-->
    <joint name="joint_castor_wheel_back" type="continuous">
         <parent link="castor_frame_link_back"/>
         <child link="castor_wheel_link_back"/>
         <axis xyz="0 1 0"/>
         <origin xyz="-0.02125 -0.0125 -0.030" rpy="0 0 0"/>
     </joint>       
     
 <!-- Kinect-->      
      <joint name="body_kinect" type="fixed">
         <parent link="body_link"/>
         <child link="kinect_link"/>
         <origin xyz="0 -1.075 0" rpy="1.5750 3.14159 0"/>
    </joint>      

<!--ONE-->
<transmission name ="Trans_1">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="joint_left_wheel">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
  </joint>
  <actuator name="Motor1">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
      <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>

<!--Two-->
<transmission name ="Trans_2">
  <type>transmission_interface/SimpleTransmission</type>
  <joint name="joint_right_wheel">
      <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
  </joint>
  <actuator name="Motor1">
    <hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
    <mechanicalReduction>1</mechanicalReduction>
  </actuator>
</transmission>


<gazebo>
    <plugin name="control" filename="libgazebo_ros_control.so"/>
</gazebo>

<gazebo>
<plugin name="joint_state_publisher" filename="libgazebo_ros_joint_state_publisher.so">
        <jointName>joint_left_wheel,joint_right_wheel,joint_castor_frame_front,joint_castor_wheel_front,joint_castor_frame_back,joint_castor_wheel_back</jointName>
    </plugin>
</gazebo> 

</robot>